<?xml-stylesheet href="../-mix/doc.stage=dev.xsl" type="text/xsl"?>
<doc_root
    doc_title="lh_invoice_create"
    >
    
    <div id="lh_invoice_create_test" lh_desktop="true">
        <data lh_application_view="lh_invoice_create" />
    </div>
    
    <p>
        <script type="wc_test" wc_test_title="lh_invoice_create: все ли поля присутствуют?">
            var node= document.querySelector( '#lh_invoice_create_test [lh_invoice_edit]' )
            var data= $lh_invoice_edit( node ).data()
            
            test.ok( data.name(), 'invoice' )
            
            test.ok( data.select( 'sku' )[0].text(), '' )
            test.ok( data.select( 'acceptanceDate' )[0].text(), '' )
            test.ok( data.select( 'supplier' )[0].text(), '' )
            test.ok( data.select( 'accepter' )[0].text(), '' )
            test.ok( data.select( 'supplierInvoiceSku' )[0].text(), '' )
            test.ok( data.select( 'supplierInvoiceDate' )[0].text(), '' )
        </script>
    </p>
    
    <p>
        <script type="wc_test" wc_test_title="lh_invoice_create: отсылается ли форма?">
            var editor= document.getElementById( 'lh_invoice_create_test' )
            
            var result= false
            $lh_invoice_onSave.listen( editor, function( event ){
                event.catched( true )
                result= true
            })
            
            editor.querySelector( '[lh_button="commit"]' ).click()
            
            test.ok( result )
        </script>
    </p>
    
</doc_root>
