<?xml-stylesheet href="../-mix/doc.stage=dev.xsl" type="text/xsl"?>
<doc_root
    doc_title="lh_product_list"
    >
    
    <div id="lh_product_list_test" lh_desktop="true">
        <data lh_application_view="lh_product_list">
            <products>
                <product>
                    <id>1</id>
                    <sku>GVOZDI007</sku>
                    <name>Гвозди 47 колибра</name>
                    <vendor>Рога и копыта</vendor>
                    <vendorCountry>Россия</vendorCountry>
                    <purchasePrice>100500</purchasePrice>
                    <barcode>0123456789</barcode>
                    <units>unit</units>
                    <val>10</val>
                    <info>У нас их дофига!</info>
                </product>
                <product>
                    <id>2</id>
                    <sku>MOLO666</sku>
                    <name>Аццкое молочко</name>
                    <vendor>Хвост и грива</vendor>
                    <vendorCountry>Великобритания</vendorCountry>
                    <purchasePrice>666</purchasePrice>
                    <barcode>qwertyйцукенг</barcode>
                    <units>liter</units>
                    <val>10</val>
                    <info>Пейте дети молоко, будете здоровы! }:-]</info>
                </product>
                <product>
                    <id>3</id>
                    <sku>SIZE5</sku>
                    <name>Сине-зелёные водоросли</name>
                    <vendor>Байкал Анлимитед Инкорпорэйшен</vendor>
                    <vendorCountry>Российская Федерация</vendorCountry>
                    <purchasePrice>1.5</purchasePrice>
                    <barcode>123 321 CHTOTOTAM</barcode>
                    <units>kg</units>
                    <val>5</val>
                    <info>Кто купит 10 кило - получит от нас большое весло!</info>
                </product>
            </products>
        </data>
    </div>

    <script type="wc_test" wc_test_title="lh_product_list: все ли данные выводятся?">
        var list= document.getElementById( 'lh_product_list_test' )
        var data= $lh_form( list ).data()
        
        test.ok( data.name(), 'products' )
        test.ok( data.select( '//product' ).length, 3 )
        test.ok( data.select( '//product[1]/sku/text()' ) + '', 'GVOZDI007' )
        test.ok( data.select( '//product[1]/name/text()' ) + '', 'Гвозди 47 колибра' )
        test.ok( data.select( '//product[1]/vendor/text()' ) + '', 'Рога и копыта' )
        test.ok( data.select( '//product[1]/vendorCountry/text()' ) + '', 'Россия' )
        test.ok( data.select( '//product[1]/purchasePrice/text()' ) + '', '100500' )
    </script>
    
</doc_root>
