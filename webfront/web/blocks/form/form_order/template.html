<% var OrderModel = require('models/order') %>
<% var SuppliersCollection = require('collections/suppliers') %>
<% var model = model || new OrderModel() %>
<% var collections = _.extend({
    suppliers: new SuppliersCollection()
}, collections); %>
<% var templates = {
    form_orderProduct: require('tpl!blocks/form/form_orderProduct/template.html')
} %>

<form id="form_order" class="form form_order">
    <div class="form__field">
        <label class="form__label">Поставщик</label>
        <select class="select" name="supplier">
            <option value="" selected disabled>Выберите поставщика</option>
            <% collections.suppliers.forEach(function(supplierModel){ %>
            <option value="<%- supplierModel.id %>"><%- supplierModel.get('name') %></option>
            <% }) %>
        </select>
    </div>
</form>

<%= model.get('collections.products').element(require('tpl!blocks/table/table_orderProducts/template.html'), {
    collections: {
        orderProducts: model.get('collections.products')
    }
}) %>

<div class="form_order__productForm">
    <h2>Добавить товар в заказ</h2>
    <%= templates.form_orderProduct() %>
</div>

<div class="form_order__totalSum">
    Итого: 2 331,00 руб.
</div>

<div class="form__controls">
    <button form="form_order" type="submit" class="button">
        Сохранить
    </button>
    <span style="margin-right: 10px;">
        или
    </span>
    <a style="margin-right: 20px;" href="/orders">
        Отменить
    </a>
</div>