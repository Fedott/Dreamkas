<% var templates = {
    table_storeGrossSalesByHours: require('tpl!blocks/table/table_storeGrossSalesByHours/table_storeGrossSalesByHours.html'),
    table_grossSalesByStores: require('tpl!blocks/table/table_grossSalesByStores/table_grossSalesByStores.html')
} %>


<h1>Отчеты</h1>

<% if (models.storeGrossSalesByHours) { %>

<h2>Продажи по часам. Магазин № <%- models.store.get('number') %></h2>

<% if (models.storeGrossSalesByHours.get('today').length) { %>
<table style="margin-bottom: 40px;" class="table table_storeGrossSalesByHour">
    <%= templates.table_storeGrossSalesByHours({
        models: _.pick(models, 'storeGrossSalesByHours')
    }) %>
</table>
<% } else { %>
<p>Нет данных</p>
<% } %>
<% } %>
<% if (collections.grossSalesByStores) { %>

<h2>Продажи по магазинам</h2>

<% if (collections.grossSalesByStores.length) { %>
<table id="table_grossSalesByStores" style="margin-bottom: 40px;" class="table table_grossSalesByStores">
    <%= templates.table_grossSalesByStores({
        collections: _.pick(collections, 'grossSalesByStores')
    }) %>
</table>
<% } else { %>
<p>Нет данных</p>
<% } %>
<% } %>
<% if (collections.grossSalesByGroups) { %>
<h2>Продажи по группам товаров</h2>

<% if (collections.grossSalesByGroups.length) { %>
<table class="table table_grossSalesByGroups">
    <thead>
    <tr>
        <th>Группа</th>
        <th>Сегодня</th>
        <th>Вчера</th>
        <th>Неделю назад</th>
    </tr>
    </thead>
    <tbody>
    <% collections.grossSalesByGroups.forEach(function(grossSalesByGroupModel){ %>
    <tr href="stores/<%- models.store.id %>/groups/<%- grossSalesByGroupModel.id %>/grossSalesByCategories">
        <td>
            <%- grossSalesByGroupModel.get('name') %>
        </td>
        <td>
            16 000 000 р.
        </td>
        <td>
            12 000 000 р.
        </td>
        <td>
            10 000 000 р.
        </td>
    </tr>
    <% }) %>
    </tbody>
</table>
<% } else { %>
<p>Нет данных</p>
<% } %>
<% } %>