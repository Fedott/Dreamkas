Meta:
@us_130

Narrative:
Как владелец магазина,
Я хочу видеть предупреждение, закрывая форму приёмки, оприходования, списания, возврата поставщику, создания товара, создания поставщика, создания магазина, о том, что введённые данные не будут сохранены,
Чтобы точно понимать последствия своих действий

GivenStories: precondition/customPrecondition/symfonyEnvInitPrecondition.story

Scenario: Появление сообщения о потери данных в списаниях при изменении поле дата

Meta:
@smoke

GivenStories: precondition/пользователь/создание_юзера.story

Given пользователь открывает страницу товародвижения
And пользователь авторизуется в системе используя адрес электронной почты 'user@lighthouse.pro' и пароль 'lighthouse'

When пользователь нажимает на кнопку Списать на странице товародвижения
And пользователь* находится в модальном окне 'создания списания'
And пользователь* вводит значение 'todayDate-1' в поле с именем 'date'

Then пользователь закрывает модальное окно по кнопке крестик и проверяет, что текст алерта гласит 'Изменения не будут сохранены. Отменить изменения?'

Scenario: Отсутствия сообщения о потери данных в списаниях при изменении поля дата и возвращении старого значения

Meta:
@smoke

GivenStories: precondition/пользователь/создание_юзера.story

Given пользователь открывает страницу товародвижения
And пользователь авторизуется в системе используя адрес электронной почты 'user@lighthouse.pro' и пароль 'lighthouse'

When пользователь нажимает на кнопку Списать на странице товародвижения
And пользователь* находится в модальном окне 'создания списания'
And пользователь* вводит значение 'todayDate-1' в поле с именем 'date'
And пользователь* вводит значение 'todayDate' в поле с именем 'date'

Then пользователь закрывает модальное окно по кнопке крестик и проверяет, что алерта не появилось

Scenario: Появление сообщения о потери данных в списаниях при изменении поля магазин

Meta:

GivenStories: precondition/пользователь/создание_юзера.story,
              precondition/магазин/создание_магазина.story

Given пользователь открывает страницу товародвижения
And пользователь авторизуется в системе используя адрес электронной почты 'user@lighthouse.pro' и пароль 'lighthouse'

When пользователь нажимает на кнопку Списать на странице товародвижения
And пользователь* находится в модальном окне 'создания списания'
And пользователь* вводит значение 'store-user' в поле с именем 'store'

Then пользователь закрывает модальное окно по кнопке крестик и проверяет, что текст алерта гласит 'Изменения не будут сохранены. Отменить изменения?'

Scenario: Появление сообщения о потери данных в списаниях при изменении автокомплитного поля поиска товара

Meta:

GivenStories: precondition/пользователь/создание_юзера.story,
              precondition/магазин/создание_товара.story

Given пользователь открывает страницу товародвижения
And пользователь авторизуется в системе используя адрес электронной почты 'user@lighthouse.pro' и пароль 'lighthouse'

When пользователь нажимает на кнопку Списать на странице товародвижения
And пользователь* находится в модальном окне 'создания списания'
And пользователь* вводит значение 'user-product1' в поле с именем 'product.name'

Then пользователь закрывает модальное окно по кнопке крестик и проверяет, что текст алерта гласит 'Изменения не будут сохранены. Отменить изменения?'

Scenario: Появление сообщения о потери данных в списаниях при изменении поля цена товара

Meta:

GivenStories: precondition/пользователь/создание_юзера.story

Given пользователь открывает страницу товародвижения
And пользователь авторизуется в системе используя адрес электронной почты 'user@lighthouse.pro' и пароль 'lighthouse'

When пользователь нажимает на кнопку Списать на странице товародвижения
And пользователь* находится в модальном окне 'создания списания'
And пользователь* вводит значение 'Не выбран' в поле с именем 'price'

Then пользователь закрывает модальное окно по кнопке крестик и проверяет, что текст алерта гласит 'Изменения не будут сохранены. Отменить изменения?'

Scenario: Появление сообщения о потери данных в списаниях при изменении поля причина товара

Meta:

GivenStories: precondition/пользователь/создание_юзера.story

Given пользователь открывает страницу товародвижения
And пользователь авторизуется в системе используя адрес электронной почты 'user@lighthouse.pro' и пароль 'lighthouse'

When пользователь нажимает на кнопку Списать на странице товародвижения
And пользователь* находится в модальном окне 'создания списания'
And пользователь* вводит значение 'Не выбран' в поле с именем 'cause'

Then пользователь закрывает модальное окно по кнопке крестик и проверяет, что текст алерта гласит 'Изменения не будут сохранены. Отменить изменения?'

Scenario: Появление сообщения о потери данных в списаниях при изменении поля кол-во товара

Meta:

GivenStories: precondition/пользователь/создание_юзера.story

Given пользователь открывает страницу товародвижения
And пользователь авторизуется в системе используя адрес электронной почты 'user@lighthouse.pro' и пароль 'lighthouse'

When пользователь нажимает на кнопку Списать на странице товародвижения
And пользователь* находится в модальном окне 'создания списания'
And пользователь* вводит значение 'Не выбран' в поле с именем 'quantity'

Then пользователь закрывает модальное окно по кнопке крестик и проверяет, что текст алерта гласит 'Изменения не будут сохранены. Отменить изменения?'